"use strict";try{!function(){var _a=null,_b=null,_c=!1,_f=/^(((https?:)?\/\/(([^\.\/]+\.)+[^\.\/]+)(:\d+)?)?([^?#]*))(\?[^#]*)?(#.*)?$/,_g=/^[\w-]{24}$/,_h="hc|",_i=new Date,_j=60*_i.getTimezoneOffset(),_k=Math.round(_i.getTime()/1e3)-_j,_an=["event"],_d=new Promise(function(e,n){_a=e}),_e=new Promise(function(e,n){_b=e}),_m=function(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return e&&e.length>n?e[n]:t},_session=function(){return window.hotelchampSession},_o=function(){return _session().sessionId},_p=function(){return Math.round((new Date).getTime()/1e3)},_q=function(){return _p()-_j},_r=function(e){return e.split("=",2)},_s=function(){return document.cookie.split(";").map(_r)},_t=function(n){return _m(_s().find(function(e){return e[0]===n}),1)},_u=function(e,n){return document.cookie=e+"="+n},_v=function(e,n,t){var s=e.match(_f),o=s[8]?s[8]+"&"+n+"="+t:"?"+n+"="+t,i=s[9]?s[9]:"";return s[1]+o+i},_w=function(e){var n=_session().sessionParam,t=new RegExp(n+"="+_o()+",(\\d+)"),s=_o(),o=_p();return t.test(e)?e.replace(t,n+"="+s+","+o):_v(e,n,s+","+o)},_z=function(e){e.hasAttribute("href")&&e.setAttribute("href",_w(e.getAttribute("href")))},_aa=function(e){return _session().logMessages&&console.log("HC_TRACKING: "+e)},_ab=function(){var t=_session().sessionId,s=_session().sessionParam,o=new RegExp(s+"="+t+",(\\d+)"),i=_p();document.querySelectorAll("a[href]").forEach(function(e){var n=e.getAttribute("href");/^http/.test(e.protocol)&&_f.test(n)&&e.hostname&&e.hostname!==window.location.hostname&&e.setAttribute("href",o.test(n)?n.replace(o,s+"="+t+","+i):_v(n,s,t+","+i))})},_ac=function(e){return _session().urlBase+"/"+_session().hotelHash+"/"+_o()+"/"+(_an.includes(e)?_session().pageHash+"/":"")+e},_ad=function e(n,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(window.navigator.onLine){if(!_c){var i=new XMLHttpRequest,a=_ac(n);i.open("POST",a),i.setRequestHeader("Content-Type","application/json"),i.timeout=3e4,i.onTimeout=function(e){return _ao(n,t,s,o)},i.onreadystatechange=function(){if(i.readyState===XMLHttpRequest.DONE)if(0===i.status)_ao(n,t,s,o);else if(200<=i.status&&i.status<300)s&&s(JSON.parse(i.responseText));else if(404==i.status){var e=JSON.parse(i.responseText);"event"!==n||e.OK||"Session does not exist"!==e.reason||(_c=!0)}else 500<=i.status&&i.status<600&&_ao(n,t,s,o)},i.withCredentials=!1,i.send(JSON.stringify(t))}}else window.setTimeout(function(){return e(n,t,s)},waitingTime)},_ao=function(e,n,t){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1e4;s<3&&window.setTimeout(function(){return _ad(e,n,t,s+1)},o)},_af=function(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};s=Object.assign({localTimestamp:_q(),category:e,action:n,source:t},s),_e.then(function(){return _ad("event",s)})},_ah=function(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};_session().trackedProperties.hasOwnProperty(e)||_session().trackedProperties[e]==n||_d.then(function(){_ad("property",{name:e,value:n,additionalData:t},function(){return _session().trackedProperties[e]=n})})},_ap=function(e,n){return _af("input","update",e,{value:n})},_aj=function(e){e.pageHash&&(window.hotelchampSession.pageHash=e.pageHash,_b())},_ak=function(){_ad("pageView",{sessionId:_o(),localTimestamp:_k,url:location.href,referrer:document.referrer},_aj)},_n=function(){var e=_m(window.name.split("|"),1);return _t("hc_session")||(e&&_g.test(e)?e:null)},_al=function(e){if(200===e.status){var n=JSON.parse(e.responseText);!n.error&&n.updateSession&&(window.hotelchampSession.sessionId=n.sessionId),window.name=_h+_o(),_u("hc_session",_o())}_a()},_am=function(){if(_session().newlySpawned){var e=_n();if(e!==_o()){var n=new XMLHttpRequest;n.onload=function(){return _al(n)},n.open("POST",_ac("checkSession")),n.setRequestHeader("Content-Type","application/json"),n.withCredentials=!0,n.send(JSON.stringify({localSessionId:e,referrer:document.referrer}))}else _a()}else window.name=_h+_o(),_u("hc_session",_o()),_a()},_aq=function(e){_d.then(function(){return e(_session().sessionId)},function(){return e(null)})};_d.then(_ak),window.hotelchampSession={logMessages:eval("!!''"),urlBase:"https://hospitality-optimizer.com",sessionId:"Rl5sUWQqMhTqxe77jwGKQee0",newlySpawned:eval("!!''"),gaid:"",hotelHash:"2zbP5G1FNH",sessionParam:"hc_session",trackedProperties:{},pageHash:null,logMessage:_aa,sendEvent:_af,sendSessionProperty:_ah,sendDocumentConnectorProperty:_ap,addTrackingCodeToHref:_w,addTrackingCodeToLinkNode:_z,fetchValidatedSessionId:_aq};try{_session().trackedProperties=JSON.parse("{\"testingGroup\":\"A\",\"gaVersion\":2}")}catch(e){}if(_am(),!_session().gaid)try{ga(function(e){var n=e.get("clientId");_session().gaid!=n&&_d.then(function(){return _ad("gaid",{gaid:n})})})}catch(e){}}()}catch(e){console.warn("Titan initialization failure",e)}