thn.define(function(){return{parse_language:function(n){return new Promise(function(e,t){var r;"mobile.synxis.com"===window.location.hostname&&e(window.dataLayer&&thn.array_get(dataLayer,"SynxisLanguage")||"en"),(r=window.location.pathname.match(n.url_re))&&n.langs.test(r[1])?e(r[1].toLowerCase()):1010915!==thn.data.property_id||"/"!==window.location.pathname?thn.in_array(thn.data.property_id,[1011093,1011065,1011066])?"/main.html"===window.location.pathname?e("en"):e("es"):1032579!==thn.data.account_user_id?(r=1032691===thn.data.account_user_id&&window.location.pathname.match(/-(\w{2})\.html$/))&&n.langs.test(r[1])?e(r[1]):t("no_language"):e("ro"):e("es")})},price_observe_dom:function(e){"mobile.synxis.com"===window.location.hostname||("V151"==(window.jQuery&&jQuery("[id^=V151_C3_]").length?"V151":"V111")?(jQuery(document).off("click",".ViewProductsBtn, .CompareBtnBtm",e.widget.minimize),jQuery(document).on("click",".ViewProductsBtn, .CompareBtnBtm",e.widget.minimize)):thn.observe_dom(document.getElementsByClassName("app_row")[1],function(){thn.add_log("*************** DOM Changed **************"),e.widget.update()}))},price_parse_data:function(e){var t,r,n,a,o={},i={0:"HOTEL",1:"USD",2:"BMD",3:"CAD",4:"CHF",5:"EUR",6:"PHP",7:"THB",8:"AED",9:"AUD",10:"BRL",11:"GBP",12:"HKD",13:"IDR",14:"INR",15:"JPY",16:"KRW",17:"MXN",18:"MYR",19:"NZD",20:"PEN",21:"RUB",22:"SAR",23:"SGD",24:"TWD",26:"ZAR",28:"MTL",29:"CNY",30:"DKK",31:"ISK",32:"KWD",33:"NOK",34:"OMR",35:"QAR",36:"SEK",37:"COP",38:"TND",39:"ALL",40:"AFN",41:"AMD",42:"ANG",43:"AOA",44:"ARS",45:"MAD",46:"DOP",47:"CRC",48:"CLP",50:"PYG",51:"HTG",52:"TTD",53:"XCD",54:"GYD",55:"BSD",56:"AWG",59:"FJD",60:"EGP",61:"CZK",62:"MZN",63:"PLN",64:"MOP",65:"BGN",66:"CUC",67:"GNF",68:"MGA",69:"NIO",70:"RON",71:"SRD",72:"TJS",73:"TRY",74:"UGX",75:"CFA",77:"KES",78:"BHD",79:"JOD",80:"VEF",81:"TMT",82:"UAH",83:"HRK",85:"VND",86:"GHS",87:"NPR",88:"HUF",89:"VUV",90:"ILS",91:"AZN",92:"KZT",93:"GEL",94:"PGK",95:"SSP",96:"SCR",97:"BWP",98:"MVR",99:"NAD",100:"LKR",101:"TZS",102:"MUR",103:"IQD",104:"NGN",105:"PKR",106:"YER",107:"BZD",108:"MNT",109:"BAM",110:"MDL",111:"JMD",113:"BBD",114:"LBP",115:"CFP",116:"CVE",117:"LAK",118:"BND",119:"MMK",120:"SHP",121:"RWF",122:"ZMK",123:"LSL",124:"DJF",125:"CDF"},c=!1,d=[],l=e.widget.get_promocode(),s=thn.in_array(thn.data.account_user_id,[])||thn.in_array(thn.data.property_id,[]);if(l&&(s||thn.in_array(l,d)||d.some(function(e){return!!l.match(new RegExp(e))})))return o;var u=window.jQuery&&0<jQuery(".SearchFltrInfo.InfoMsg").length;o.language=thn.data.language,o.date_begin=window._GlobalTokens&&_GlobalTokens.ArrivalDtYYYYMMDD&&_GlobalTokens.ArrivalDtYYYYMMDD.replace(/-/g,"/")||(thn.array_get(window.dataLayer,"SynxisArrivalSearch")||"").replace(/(\d+)\D+(\d+)\D+(\d+)/,"$3/$1/$2")||thn.array_get(window.dataLayer,"arrivalDate").replace(/(\d+)\D+(\d+)\D+(\d+)/,"$3/$1/$2"),o.date_end=window._GlobalTokens&&_GlobalTokens.DepartDtYYYYMMDD&&_GlobalTokens.DepartDtYYYYMMDD.replace(/-/g,"/")||(thn.array_get(window.dataLayer,"SynxisDepartureSearch")||"").replace(/(\d+)\D+(\d+)\D+(\d+)/,"$3/$1/$2")||thn.array_get(window.dataLayer,"departureDate").replace(/(\d+)\D+(\d+)\D+(\d+)/,"$3/$1/$2"),o.adults=window.jQuery&&parseInt(jQuery(".AdultQtyDropDown:eq(0)").val(),10)||1,o.children=window.jQuery&&parseInt(jQuery(".ChildrenQtyDropDown:eq(0)").val(),10)||0,o.guests=Math.max(1,o.adults+o.children);var _=window.jQuery&&jQuery('select[onchange^="UpdateChildAges"]');if(o.children&&_.length){for(var y={adults:o.adults,children:o.children,children_ages:[]},h=0;h<o.children;h+=1)y.children_ages.push(_.eq(h).val());o.rooms_dispo=[y]}o.rooms=1;var m=window._GlobalTokens&&_GlobalTokens.RmQty&&parseInt(_GlobalTokens.RmQty,10)||1;if(u)return thn.add_log("[PW] Detected room filtered: avoid PW comparison"),o;if("mobile.synxis.com"===window.location.hostname)(a=$(".Price > strong").map(function(e,t){return thn.parse_sentence_for_number($(t).text())}).toArray()).length?(o.currency=$(".Price > strong + span:eq(0)").text(),o.price=Math.min.apply(Math,a)/thn.days_between(o.date_begin,o.date_end),o.set=!0):o.no_rooms=!0;else{t=window.jQuery&&jQuery("[id^=V151_C3_]").length?"V151":"V111";var p=document.getElementsByClassName("thumb-cards_price");if(void 0!==window.lowestAvePrice&&0!=window.lowestAvePrice||p.length){var g=Array.from(document.getElementsByClassName("CurrCode")).filter(function(e){return e.textContent.trim().length});if(g.length&&(o.currency=thn.get_currency_code(g[0].textContent.trim())),o.currency||(g=document.querySelector&&document.querySelector("input[id*=CurrencyCode]"))&&g.value&&i[g.value]&&(o.currency=i[g.value]),o.currency&&"HOTEL"!==o.currency||(c=!0,o.currency=thn.parse_url_parameter("currency")||thn.parse_url_parameter("avcurrency")||window.hotelDefaultRatePrefix),"V111"===t&&window.lowestAvePrice)r=thn.parse_sentence_for_number(window.lowestAvePrice.replace(/\s+/g,"")),1013939!==thn.data.property_id&&1013940!==thn.data.property_id||o.currency&&c&&o.currency!==window.hotelDefaultRatePrefix&&(o.currency=window.hotelDefaultRatePrefix);else if(window.jQuery){n=jQuery(".ProductsList .ProductsHeader").map(function(e,t){if(1011837===thn.data.property_id&&"KWD"===o.currency){var r=jQuery(t).find(".Price").text().replace(/ +?/g,"");return r=r.slice(0,-3),t.textContent.match(/identifica|valid id/i)?null:thn.parse_sentence_for_number(r)}return t.textContent.match(/identifica|valid id/i)?null:thn.parse_sentence_for_number(jQuery(t).find(".Price, .PriceFreq").text())}).toArray(),r=Math.min.apply(Math,n);var w=jQuery(".PriceFreq:eq(0)");w.length&&w.text().match(/stay|estad|aufenthalt|séjour|permanência/i)&&(r/=thn.days_between(o.date_begin,o.date_end))}else{for(var D=0,f=0;f<p.length;f+=1){n=(n=p[f].innerText||p[f].textContent).match(/\d[\d\s\.,.]+/g);for(var C=0;C<n.length;C+=1)r=thn.parse_sentence_for_number(n[C].replace(/(\r\n|\n|\r)/gm,"")),(0==D||r<D)&&(D=r)}r=D}o.price=r,o.set=!0}else o.no_rooms=!0}return o.set&&(o.price/=m),o},booking_parse_data:function(e){var t={};if(window.dataLayer){t.date_begin=(thn.array_get(dataLayer,"SynxisArrivalSearch")||thn.object_get(dataLayer,"arrivalDate",function(e){return e})||"").replace(/(\d+)\D+(\d+)\D+(\d+)/,"$3/$1/$2"),t.date_end=(thn.array_get(dataLayer,"SynxisDepartureSearch")||thn.object_get(dataLayer,"departureDate",function(e){return e})||"").replace(/(\d+)\D+(\d+)\D+(\d+)/,"$3/$1/$2"),t.currency=thn.array_get(dataLayer,"transactionCurrency")||thn.array_get(dataLayer,"Currency")||thn.datalayer.get("ecommerce.currencyCode"),t.price=thn.array_get(dataLayer,"transactionTotal"),t.booking_id=thn.array_get(dataLayer,"SynxisTransactionId")||(thn.datalayer.get("transactionId")||"").match(/\w*$/)[0];var r=document.getElementsByClassName("ItinTotalTxt");r.length&&(t.price=thn.parse_sentence_for_number(r[0].textContent))}if(!t.price||!t.currency){var n=document.getElementsByClassName("ResTotalValue"),a=document.getElementsByClassName("ResPriceDetailValue");n.length?(n=n[0].innerText||n[0].textContent,t.price||(t.price=thn.parse_sentence_for_number(n)),t.currency||(t.currency=n.substr(0,3))):a.length&&(a=a[a.length-1].textContent,t.price||(t.price=thn.parse_sentence_for_number(a)),t.currency||(t.currency=a.match(/[^\s\d.,]+/)[0]),1011837===thn.data.property_id&&"KWD"===t.currency&&(a=(a=a.replace(/ +?/g,"")).slice(0,-6),t.price=thn.parse_sentence_for_number(a)))}return window._GlobalTokens&&(t.booking_id||(t.booking_id=_GlobalTokens.ConfirmNo),t.date_begin||(t.date_begin=(_GlobalTokens.ArrivalDtYYYYMMDD||"").replace(/-/g,"/")),t.date_end||(t.date_end=(_GlobalTokens.DepartDtYYYYMMDD||"").replace(/-/g,"/")),t.currency||(t.currency=_GlobalTokens.CurrCode)),t},get_promocode:function(e){return"mobile.synxis.com"===window.location.hostname&&window._GlobalTokens&&(e.promocode=_GlobalTokens.PromoCode||_GlobalTokens.GroupCode||""),e.promocode},config:{}}});