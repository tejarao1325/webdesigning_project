(function(){var assetsPath="//tt.mbww.com/tt-509694b0a010c6431900e71b8210521af57d39ce8e64deb365f0a5c6c9a2ef6d/31356/";var globalPixelsPath="";var globalEmbeddedPixelsPath="";var data=[{"segmentName":"EN_HP","standartAssetId":42792,"embeddedAssetId":0,"urls":["http://chelsea.eatonhotels.com/","http://chelsea.eatonhotels.com/index.html","http://chelsea.eatonhotels.com//"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"EN_Rooms","standartAssetId":42793,
"embeddedAssetId":0,"urls":["http://chelsea.eatonhotels.com/rooms/139.htm"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"EN_Rooms_Advanced Purchase","standartAssetId":42794,"embeddedAssetId":0,"urls":["http://chelsea.eatonhotels.com/rooms/advance-purchase.htm"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"EN_Rooms_Aeroplan","standartAssetId":42795,"embeddedAssetId":0,"urls":["http://chelsea.eatonhotels.com/rooms/aeroplan.htm"],
"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"EN_Rooms_Book Direct","standartAssetId":42796,"embeddedAssetId":0,"urls":["http://chelsea.eatonhotels.com/rooms/book_direct.htm"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"EN_Rooms_Special Offer","standartAssetId":42797,"embeddedAssetId":0,"urls":["http://chelsea.eatonhotels.com/rooms/chelsea-rooms-special-offer.htm","http://chelsea.eatonhotels.com/rooms/summer-offers.htm",
"http://chelsea.eatonhotels.com/rooms/chelsea-rooms-special-offer"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"EN_Rooms_ClubandSuiteRetreat","standartAssetId":42798,"embeddedAssetId":0,"urls":["http://chelsea.eatonhotels.com/rooms/clubandsuiteretreat.htm"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"EN_Rooms_EatonEssentials","standartAssetId":42799,"embeddedAssetId":0,"urls":["http://chelsea.eatonhotels.com/rooms/eaton-essentials.htm"],
"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"EN_Rooms_FamilyGetaway","standartAssetId":42800,"embeddedAssetId":0,"urls":["http://chelsea.eatonhotels.com/rooms/familygetaway.htm"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"EN_Rooms_LingerLongerForLess","standartAssetId":42801,"embeddedAssetId":0,"urls":["http://chelsea.eatonhotels.com/rooms/lingerlongerforless.htm","http://chelsea.eatonhotels.com/rooms/Linger_Longer.htm",
"http://chelsea.eatonhotels.com/rooms/linger_longer.htm","http://chelsea.eatonhotels.com/rooms/Linger_at_Eaton.htm"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"EN_Rooms_MarchBreakFamily","standartAssetId":42802,"embeddedAssetId":0,"urls":["http://chelsea.eatonhotels.com/rooms/march-break-family-blast.htm"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"EN_Rooms_TaxIncluded",
"standartAssetId":42803,"embeddedAssetId":0,"urls":["http://chelsea.eatonhotels.com/rooms/tax-included.htm"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"EN_Eaton_Chelsea_Conversion","standartAssetId":0,"embeddedAssetId":42804,"urls":["https://gc.synxis.com/rez.aspx"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"EN_Eaton Chelsea_Contact Us","standartAssetId":42805,"embeddedAssetId":0,
"urls":["http://chelsea.eatonhotels.com/home/contact_us.htm","http://eatonhotels.com/index.html"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"EN_Eaton Chelsea_Synxis_BOOK","standartAssetId":42806,"embeddedAssetId":0,"urls":["https://gc.synxis.com/rez.aspx","https://gc.synxis.com/rez.aspx#V114_C0_rd_RDR_ctl00_RoomHelpDiv","https://gc.synxis.com/rez.aspx#V114_C0_rd_RDR_ctl00_DayItemsRepeater_ctl00_RateHelpDiv","https://gc.synxis.com/rez.aspx#V112_C1_CRR_ctl01_ExtendedTripSummaryCntrl_ts_RateHelpDiv",
"https://gc.synxis.com/rez.aspx#V112_C1_CRR_ctl01_ExtendedTripSummaryCntrl_ts_RoomHelpDiv","https://gc.synxis.com:443/rez.aspx","http://gc.synxis.com/rez.aspx"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"EN_Eaton Chelsea_Mobile Conversion","standartAssetId":42807,"embeddedAssetId":0,"urls":["https://mobile.synxis.com/Reservation/Confirmation"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},
{"segmentName":"DBM_EN_Eaton Chelsea_Aeroplan","standartAssetId":42808,"embeddedAssetId":0,"urls":["http://chelsea.eatonhotels.com/rooms/aeroplan.htm","http://chelsea.eatonhotels.com/rooms/aeroplan.h","http://chelsea.eatonhotels.com/rooms/earn-2250-aeroplan-miles.htm","http://langham.welkin-multimedia.com/eatonsmart/chelsea/en/rooms/earn-2250-aeroplan-miles.htm"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"DBM_EN_Eaton Chelsea_Show your Key",
"standartAssetId":42809,"embeddedAssetId":0,"urls":["https://gc.synxis.com/rez.aspx#iit\x3d1404330831335\x26tmr\x3dload\x3d1404330828085\x26core\x3d1404330831335\x26main\x3d1404330831335\x26ifr\x3d1404330831335\x26cb\x3d0\x26cdn\x3d0\x26chr\x3dutf-8\x26kw\x3d\x26ab\x3d-\x26dh\x3dgc.synxis.com\x26dr\x3dhttp://chelsea.eatonhotels.com/attractions/chelseahotel-show-your-key-and-sav"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"DBM_EN_Eaton Chelsea_Save 20%",
"standartAssetId":42810,"embeddedAssetId":0,"urls":["http://chelsea.eatonhotels.com/rooms/lingerlongerforless.htm","http://chelsea.eatonhotels.com/rooms/linger_longer.htm","http://chelsea.eatonhotels.com/rooms/Linger_Longer.","http://chelsea.eatonhotels.com/rooms/Linger_Longer_at_Eaton.htm","http://chelsea.eatonhotels.com/rooms/linger-at-chelsea.htm"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"DBM_EN_Eaton Chelsea_RT","standartAssetId":42811,
"embeddedAssetId":0,"urls":["http://chelsea.eatonhotels.com/","http://chelsea.eatonhotels.com/rooms/chelsea-rooms-special-offer.htm","http://chelsea.eatonhotels.com/rooms/tax-included.htm","http://chelsea.eatonhotels.com/rooms/book_direct.htm","http://chelsea.eatonhotels.com/index.html","http://chelsea.eatonhotels.com/rooms/clubandsuiteretreat.htm","http://chelsea.eatonhotels.com/rooms/advance-purchase.htm","http://chelsea.eatonhotels.com//","http://chelsea.eatonhotels.com/rooms/eaton-essentials.htm",
"http://chelsea.eatonhotels.com/rooms/march-break-family-blast.htm","http://chelsea.eatonhotels.com/home/contact_us.htm","http://chelsea.eatonhotels.com/rooms/Family_Getaway.htm","http://chelsea.eatonhotels.com/rooms/Club_Retreat.htm","http://chelsea.eatonhotels.com/consent.htm","http://chelsea.eatonhotels.com/rooms/chelsea-rooms-special","http://chelsea.eatonhotels.com/r","http://chelsea.eatonhotels.com/rooms/summer-offers.htm","http://chelsea.eatonhotels.com/rooms","http://chelsea.eatonhotels.com/rooms/chelsea",
"http://chelsea.eatonhotels.com/rooms/chelsea-rooms-special-offer","http://chelsea.eatonhotels.com/rooms/chelsea-rooms","http://chelsea.eatonhotels.com/room","http://chelsea.eatonhotels.com/rooms/chelseahotel-chelsea-room.htm","http://chelsea.eatonhotels.com/rooms/Shop_n_Stay.htm","http://chelsea.eatonhotels.com/rooms/139","http://chelsea.eatonhotels.com/rooms/chelsea-rooms-","http://chelsea.eatonhotels.com/rooms/chelsea-rooms-special-","http://chelsea.eatonhotels.com/rooms/","http://chelsea.eatonhotels.com/rooms/valentines-day-package.htm",
"http://chelsea.eatonhotels.com/rooms/Chelsea_Essentials.htm","http://chelsea.eatonhotels.com/rooms/march-break-family-blas","http://chelsea.eatonhotels./","http://chelsea.eatonhotel/","http://chelsea.eatonhotels/","http://chelseatoronto.com/","http://chelsea.eatonhotels.com/rooms/bed-and-breakfast.htm","http://chelsea.eatonhotels.com/rooms/linger-longer.htm","http://chelsea.eatonhotels.com//index.html","http://chelsea.eatonhotels.com//rooms/advance-purchase.htm","http://chelsea.eatonhotels.com/rooms/aeroplan.",
"http://chelsea.eatonhotels.com/rooms/139.","http://chelsea.eatonhotels.com/media/media_centre.htm","http://chelsea.eatonhotels.com/locate/chelsea-hotels-map.htm","http://chelseatoronto.com/en/","http://chelseatoronto.com/en/explore/attractions","http://chelseatoronto.com/en/hotel/show-your-key-and-save","http://chelseatoronto.com/en/meetings","http://chelseatoronto.com/en/hotel/deck-27","http://chelseatoronto.com/en/assets/images/favicon.png","http://chelseatoronto.com/en/gallery","http://chelseatoronto.com/en/explore",
"http://chelseatoronto.com/en/eat-drink","http://chelseatoronto.com/en/best-rate-guarantee","http://chelseatoronto.com/en/hotel/e-club-lounge","http://chelseatoronto.com/en/hotel","http://chelseatoronto.com/en/hotel/family-fun-zone","http://chelseatoronto.com/en/eat-drink/market-garden","http://chelseatoronto.com/en/eat-drink/market-garden-on-the-go","http://chelseatoronto.com/en/contact-us","http://chelseatoronto.com/en/hotel/chelsea-services","http://chelseatoronto.com/en/explore/shopping","http://chelseatoronto.com/en/maps-and-directions",
"http://chelseatoronto.com/en/explore/dining","http://chelseatoronto.com/en/eat-drink/monarchs-pub","http://chelseatoronto.com/en/eat-drink/t-bar","http://chelseatoronto.com/en/events","http://chelseatoronto.com/en/accessibility","http://chelseatoronto.com/en/eat-drink/expresso","http://chelseatoronto.com/en/explore/medical","http://chelseatoronto.com/en/explore/entertainment","http://chelseatoronto.com/en/experience-langham/","http://chelseatoronto.com/en/events/","http://chelseatoronto.com/en/locations/",
"http://chelseatoronto.com/en/cookies-policy/","http://chelseatoronto.com/en/assets/img/icons/facebook.svg","http://chelsea.eatonhotels.com.cn/themed/pink/img/eng/hmt_findhotel.jpg","http://chelsea.eatonhotels.com/restaurants/chelsea-dining-market-garden.htm","http://chelsea.eatonhotels.com.cn/themed/pink/img/eng/hmt_events.jpg","http://chelseatoronto.com/en/explore/www.harbourfrontcentre.com/","http://chelsea.eatonhotels.com/photos/eaton-chelsea-hotel.htm","http://chelsea.eatonhotels.com.cn/meetings/business-venue-floor-plan.htm",
"http://chelseatoronto.com/en/hotel/chelsea-services/parking","http://chelseatoronto.com/en/hotfa/show-your-key-and-save","http://chelseatoronto.com/en/explore/shopping%25239","http://chelseatoronto.com/en/eat-drink/market-garden/menu","http://chelseatoronto.com/en/MarketGarden/Menu","http://chelsea.eatonhotels.com.cn/home/sitemap.htm","http://chelsea.eatonhotels.com.cn/restaurants/chelsea-dining-t-bar.htm","http://chelseatoronto.com/en/cancellation","http://chelsea.eatonhotels.com/rooms/chelseahotel-one-bedroom-suite.htm",
"http://chelsea.eatonhotels.com/meetings/business-venue-chelsea.htm","http://chelsea.eatonhotels.com.cn/meetings/chelsea-meetings-offer.htm","http://chelseatoronto.com/en/explore/attractions%252315","http://chelsea.eatonhotels.com/home/sitemap.htm","http://chelseatoronto.com/en/custom","http://chelseatoronto.com/en/explore/attractions%2525231","http://chelsea.eatonhotels.com/info/chelseahotel-greenmission.htm","http://chelseatoronto.com/en/face","http://chelsea.eatonhotels.com/rooms/family-fun.htm",
"http://chelseatoronto.com/en/explore/","http://chelseatoronto.com/en/explore/shopping%25231","http://chelsea.eatonhotels.com/locate/chelsea-city-guide.htm","http://chelseatoronto.com/en/404error.html","http://chelsea.eatonhotels.com/rooms/march"],"events":[{"eventType":"pageLoad","selectorType":"","value":"","isFireOnce":0}],"meta":[]},{"segmentName":"DBM_EN_Eaton Chelsea_Drive Stay","standartAssetId":42812,"embeddedAssetId":0,"urls":["http://chelsea.eatonhotels.com/rooms/drive-stay-save.htm"],"events":[{"eventType":"pageLoad",
"selectorType":"","value":"","isFireOnce":0}],"meta":[]}];var isDomainPopulated=true;var extraParams=[];var tagId=729;var iframeTag=false;var root=document;var advertiserUrl=iframeTag?root.referrer:root.location.href;if(typeof ord!=="undefined")extraParams.push("ord\x3d"+ord);var allowedParams=["synxis","?chain","Reservation"];var excludedDomains=[];var includedDomains=["13wham.com","8324583.com","ad.doubleclick.net","ad.naver.com","adguard.com","anonyanalytics.com","ask.fm","astronomia.cat","baidu.com",
"band.us","bellystyle.co.kr","bing.com","cc.bingj.com","chelsea.eatonhotels.com","chelsea.eatonhotels.com.cn","chelseatoronto.com","cn.bing.com","conceivingconcepts.com","d256kipa702ou3.cloudfront.net","eaton-hotel.com","eatonchelsea.com","eatonhongkong.com","eatonhotel.com.hk","email-langhamhotels.com","facebook.com","fanyi.myyoudao.com","fanyi.ydstatic.com","ga1.datavalet.net","gamerskyfor15.bloguez.com","gameshacktool.bloguez.com","gc.synxis.com","gdcenter.kr","google.ae","google.be","google.ca",
"google.co.jp","google.co.kr","google.co.ls","google.co.th","google.co.uk","google.co.za","google.com","google.com.au","google.com.br","google.com.hk","google.com.my","google.com.ph","google.com.sg","google.com.tr","google.de","google.es","google.ie","google.lk","google.pt","google.tg","google.tn","googleads.g.doubleclick.net","googleweblight.com","hackinformer.com","haeriwon.com","healthyi.net","hellobro.info","hk.mobi.yahoo.com","hkeaton.com","hongkong.eatonhotels.com","hongkong.eatonhotels.com.cn",
"honyaku.yahoofs.jp","hotelrooms.com","hoylosangeles.com","incontext.sabrehospitality.com","incontextproducts.sabredemos.com","intranet.remote.uhn.ca","jnst.co.kr","keshasparty.com","l.facebook.com","langham.welkin-multimedia.com","larger.io","lespac.com","loadstartrailers.com","m.eatonhotels.com","m.eatonhotels.com.cn","m.facebook.com","m.toronto.com","marcjacobspursesale.bloguez.com","mobile.synxis.com","newlynatural.com","nivedya-staging.com","nongluangcity.go.th","o00.in","oojo.co.kr","openrice.com",
"origin-chelseatoronto.com","origin-eatonhongkong.com","origin-hongkong.eatonhotels.com","portal.condor.com","prlog.ru","r.search.yahoo.com","real-time-analytics.com","s-eden.co.kr","seokprojet.com","sh1004.co.kr","sitetrans.naver.net","slc.me","stageportal.condor.com","syndication.traffichaus.com","thoughtsofajosh.tumblr.com","thread_410966.buy-forum.ru","translate.baiducontent.com","translate.googleusercontent.com","tripadvisor.ca","tripadvisor.com","tt.mbww.com","ultimate-guitar.com","virtual.recorder.ca",
"vpn.hrlsc.on.ca","webcache.googleusercontent.com","webdefence.global.blackspider.com","weberempreendimentos.com.br","wechsel-traffic.de","weibo.com","www4sv.we-can.co.jp","www5sv.we-can.co.jp","yandex.ru"];var ttDiv,ttScript,tempUrl,urlParts,urlDomain,queryParams,domainValid=true,isInvalidUrl=false,userData={};function utag(currentUrl){init();function init(){createDiv();cleanUpUrl();getUrlParts();getDomain();validateDomain();if(!domainValid)return;getQueryParams();getUserData();fireGlobalPixels();
parseMappings(data)}function getQueryParams(){var ttRegex=/([^\?]*)(\?.*)/;var match;if(iframeTag)match=null;else match=ttRegex.exec(ttScript.src);queryParams=match!=null?match[2]:"";if(root.referrer!="")extraParams.push("httpReferrer\x3d"+encodeURIComponent(root.referrer));extraParams.push("httpLocation\x3d"+encodeURIComponent(currentUrl));if(extraParams.length>0)if(queryParams==="")queryParams="?"+extraParams.join("\x26");else queryParams=queryParams+"\x26"+extraParams.join("\x26")}function validateDomain(){if(isDomainPopulated&&
(excludedDomains.length!==0&&excludedDomains.indexOf(urlDomain)!==-1))domainValid=false;else if(!isDomainPopulated&&includedDomains.indexOf(urlDomain)==-1)domainValid=false}function getDomain(){try{urlDomain=urlParts[0].match(/:\/\/(.[^\/]+)/)[1]}catch(err){urlDomain=tempUrl;isInvalidUrl=true}}function getUrlParts(){urlParts=tempUrl.split("?");if(urlParts.length>=2&&allowedParams.length!=0){var parameterArray=[];for(var param in allowedParams){var urlParameter=encodeURIComponent(allowedParams[param])+
"\x3d";var pars=urlParts[1].split(/[&;]/g);for(var i=pars.length;i-- >0;)if(pars[i].indexOf(urlParameter,0)==0){parameterArray.push(pars[i]);break}if(parameterArray.length>0)tempUrl=urlParts[0]+"?"+parameterArray.sort().join("\x26");else tempUrl=urlParts[0]}}else tempUrl=urlParts[0]}function cleanUpUrl(){tempUrl=currentUrl.replace(/ /,"").replace(/\|/,"%7C").replace(/^(https?):\/\/(www\.)?/i,"$1://").replace(/;jsessionid=[^;?]*/,"")}function createDiv(){if(ttDiv)return;var scripts=root.getElementsByTagName("script");
ttScript=scripts[scripts.length-1];ttDiv=root.createElement("div");ttDiv.id="totaltagdiv"+tagId;if(iframeTag)document.body.appendChild(ttDiv);else ttScript.parentNode.insertBefore(ttDiv,ttScript)}function insertSegmentIFrame(segment){var source=assetsPath+segment.standartAssetId+".html"+queryParams;segment.iframe=createIFrame(source)}function insertSegmentScript(segment){var source=assetsPath+segment.embeddedAssetId+".js"+queryParams;segment.script=createScript(source)}function createIFrame(url){var iframe=
root.createElement("iframe");ttDiv.appendChild(iframe);iframe.src=url;iframe.style.display="none";return iframe}function createScript(url){var script=root.createElement("script");ttDiv.appendChild(script);script.src=url;script.style.display="none";return script}function getUserData(){userData.os=getOS();userData.browser=getBrowser();userData.device=getDevice();userData.referrer=getReferrer()}function getBrowser(){var ua=navigator.userAgent,tem,M=ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||
[];if(M[1]==="Chrome"){if(ua.match(/\b(OPR)\/(\d+)/))return"Opera";if(ua.match(/\b(Edge)\/(\d+)/))return"Edge"}if(/trident/i.test(M[1])){tem=/\brv[:]+(\d+)/g.exec(ua)||[];return"IE"}M=M[2]?[M[1],M[2]]:[navigator.appName,navigator.appVersion,"-?"];if((tem=ua.match(/version\/(\d+)/i))!=null)M.splice(1,1,tem[1]);if(M[0]==="Safari"&&ua.match(/CriOS/i))M[0]="Chrome";if(userData.os==="Android"&&M[0]==="Safari")M[0]="native";return M[0]}function getOS(){if(window.navigator.userAgent.match(/Windows NT 10.0/i))return"Windows 10";
if(window.navigator.userAgent.match(/Windows NT 6.3/i))return"Windows 8/8.1";if(window.navigator.userAgent.match(/Windows NT 6.2/i))return"Windows 8/8.1";if(window.navigator.userAgent.match(/Windows NT 6.1/i))return"Windows 7";if(window.navigator.userAgent.match(/Windows NT 6.0/i))return"Windows Vista";if(window.navigator.platform.match(/Mac/i))return"Mac OS X";if(window.navigator.platform.match(/iPhone/i))return"IOS";if(window.navigator.platform.match(/iPad/i))return"IOS";if(window.navigator.userAgent.match(/Android/i))return"Android";
if(window.navigator.userAgent.match(/Windows Phone/i))return"Windows Mobile";if(window.navigator.userAgent.match(/iemobile/i))return"Windows Mobile";if(window.navigator.userAgent.match(/WPDesktop/i))return"Windows Mobile";if(window.navigator.userAgent.match(/Linux/i))return"Linux"}function getDevice(){var device="Desktop";if(window.navigator.userAgent.match(/Android|BlackBerry|iPhone|IEMobile|WPDesktop/i))device="Phone";if(window.navigator.userAgent.match(/iPad|Tablet/i))device="Tablet";if(window.navigator.userAgent.match(/Android/i)&&
!window.navigator.userAgent.match(/Mobile/i))device="Tablet";return device}function getReferrer(){var str=root.referrer.replace(/^(https?):\/\/(www\.)?/i,"");return str.substring(0,str.indexOf("/"))}function checkMeta(meta){var totalResult=true;for(var i=0;i<meta.length;i++){var matchResult=matchMetaItem(meta[i]);if(i===0)totalResult=matchResult;else if(meta[i-1].relation==="or")totalResult=totalResult||matchResult;else totalResult=totalResult&&matchResult}return totalResult}function matchMetaItem(item){var match=
false;if(item.type==="referrer")match=matchReferrers(item.list,userData[item.type]);else match=item.list.indexOf(userData[item.type])!==-1;return match}function matchReferrers(arr,referrer){var result=false;for(var i=0;i<arr.length;i++)if(arr[i].indexOf(referrer)!==-1&&referrer!=="")result=true;return result}function parseMappings(data){for(var i=0;i<data.length;i++){var segment=decodeData(data[i]);if(!matchUrl(currentUrl,segment.urls)||!checkMeta(segment.meta))continue;bindEvents(segment)}}function decodeData(segment){for(var i=
0;i<segment.urls.length;i++)segment.urls[i]=decodeURI(segment.urls[i]);for(var i=0;i<segment.events.length;i++)segment.events[i].value=decodeURI(segment.events[i].value);for(var i=0;i<segment.meta.length;i++)if(segment.meta[i].type==="referrer")for(var j=0;j<segment.meta[i].list.length;j++)segment.meta[i].list[j]=decodeURI(segment.meta[i].list[j]);return segment}function matchUrl(url,urlsList){if(urlsList.length===0)return true;var match=false;var regexp;var escapedUrl;var matchedStr;for(var i=0;i<
urlsList.length;i++)if(url===urlsList[i]){match=true;break}else{escapedUrl=urlsList[i].replace(/\*/g,"(.*)").replace(/\?/g,"\\?").replace(/http(s)?:\/\//,"http$1://(www.)?");regexp=new RegExp(escapedUrl);matchedStr=url.match(regexp);if(matchedStr!==null&&url===matchedStr[0]){match=true;break}}return match}function bindEvents(segment){for(var i=0;i<segment.events.length;i++){var e=segment.events[i];var elements=findElement(e);if(e.eventType==="pageLoad")firePixels(segment);if(e.eventType==="timer")setTimeout(function(){firePixels(segment)},
+e.value);if(elements===null||!elements.length)continue;if(e.eventType==="btnClick"||e.eventType==="linkClick")for(var j=0;j<elements.length;j++)attachDomEvent(elements[j],"click",e,segment);if(e.eventType==="formSubmit")for(var j=0;j<elements.length;j++)attachDomEvent(elements[j],"submit",e,segment);if(e.eventType==="elementExists"&&elements[0])firePixels(segment)}}function attachDomEvent(el,domEvent,event,segment){addEvent(el,domEvent,function callback(){if(event.isFireOnce&&event.hasBeenTriggered)return;
firePixels(segment);event.hasBeenTriggered=true})}function fireGlobalPixels(){if(iframeTag)globalPixelsPath&&document.write('\x3cscript type\x3d"text/javascript" src\x3d"'+globalPixelsPath+'"\x3e\x3c/script\x3e');else{globalPixelsPath&&createIFrame(globalPixelsPath+queryParams);globalEmbeddedPixelsPath&&createScript(globalEmbeddedPixelsPath+queryParams)}}function firePixels(segment){if(segment.standartAssetId)if(!segment.iframe)insertSegmentIFrame(segment);else{ttDiv.removeChild(segment.iframe);ttDiv.appendChild(segment.iframe)}if(segment.embeddedAssetId)insertSegmentScript(segment)}
function findElement(event){var elements=null;switch(event.selectorType){case "all":if(event.eventType=="btnClick")elements=root.querySelectorAll("button");if(event.eventType=="linkClick")elements=root.querySelectorAll("a");if(event.eventType=="formSubmit")elements=root.querySelectorAll("form");break;case "css":elements=root.querySelectorAll(event.value);break;case "class":elements=root.querySelectorAll("."+event.value);break;case "id":elements=root.querySelectorAll("#"+event.value);break;case "link":var links=
root.getElementsByTagName("a");for(var i=0;i<links.length;i++)if(links[i].href.indexOf(event.value)!==-1)elements===null?elements=[links[i]]:elements.push(links[i]);break;case "name":elements=root.getElementsByName(event.value);break;default:break}elements=filterElements(elements,event);return elements}function filterElements(elements,event){var filteredElements=[];if(event.eventType!=="linkClick"&&event.eventType!=="btnClick")return elements;for(var i=0;i<elements.length;i++){if(event.eventType===
"linkClick"&&elements[i].tagName==="A")filteredElements.push(elements[i]);if(event.eventType==="btnClick"&&elements[i].tagName==="BUTTON")filteredElements.push(elements[i])}return filteredElements}if(!Array.prototype.indexOf)Array.prototype.indexOf=function(searchElement,fromIndex){var k;if(this==null)throw new TypeError('"this" is null or not defined');var O=Object(this);var len=O.length>>>0;if(len===0)return-1;var n=+fromIndex||0;if(Math.abs(n)===Infinity)n=0;if(n>=len)return-1;k=Math.max(n>=0?
n:len-Math.abs(n),0);while(k<len){if(k in O&&O[k]===searchElement)return k;k++}return-1};function addEvent(el,event,callback){if(!el)return;if(window.attachEvent)el.attachEvent("on"+event,callback);else el.addEventListener(event,callback)}function removeEvent(el,event,callback){if(window.detachEvent)el.detachEvent("on"+event,callback);else el.removeEventListener(event,callback)}}window.totaltag=window.cadreonUtag=utag;if(window.utag===undefined)window.utag=utag;utag(advertiserUrl)})();
